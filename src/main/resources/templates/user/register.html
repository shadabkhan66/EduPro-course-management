<!DOCTYPE html>
<!--
    ============================================================
    user/register.html - User registration form
    ============================================================
    THYMELEAF NOTES:

    th:object="${registrationDTO}"
      → Binds to UserRegistrationDTO (not the User entity!)
      → This DTO has only the fields the user should fill in
      → Role is NOT on the form -- it's hardcoded to STUDENT in the service

    SECURITY FIX (v0.2.0):
    Previously, the registration form included a role dropdown where
    users could select ADMIN. Now the role is assigned server-side.
    ============================================================
-->
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - EduPro</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>
<body>

    <header th:replace="~{fragments/header :: header}"></header>

    <main class="site-main">
        <div class="container container-narrow">

            <h2 class="page-title text-center">Create Account</h2>
            <p class="page-subtitle text-center">Register for a new student account</p>
            <hr>

            <form th:object="${registrationDTO}" th:action="@{/users/register}" method="post">

                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" th:field="*{username}"
                           placeholder="Choose a username (min 3 characters)" />
                    <span th:if="${#fields.hasErrors('username')}"
                          th:errors="*{username}" class="field-error">Username error</span>
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" th:field="*{email}"
                           placeholder="you@example.com" />
                    <span th:if="${#fields.hasErrors('email')}"
                          th:errors="*{email}" class="field-error">Email error</span>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" th:field="*{password}"
                           placeholder="Min 6 characters" />
                    <span th:if="${#fields.hasErrors('password')}"
                          th:errors="*{password}" class="field-error">Password error</span>
                </div>

                <div class="form-group">
                    <label for="firstName">First Name</label>
                    <input type="text" id="firstName" th:field="*{firstName}"
                           placeholder="Enter first name" />
                    <span th:if="${#fields.hasErrors('firstName')}"
                          th:errors="*{firstName}" class="field-error">First name error</span>
                </div>

                <div class="form-group">
                    <label for="lastName">Last Name</label>
                    <input type="text" id="lastName" th:field="*{lastName}"
                           placeholder="Enter last name (optional)" />
                    <span th:if="${#fields.hasErrors('lastName')}"
                          th:errors="*{lastName}" class="field-error">Last name error</span>
                </div>

                <div class="actions">
                    <a th:href="@{/login}" class="btn btn-outline">Cancel</a>
                    <button type="submit" class="btn btn-success">
                        <i class="bi bi-person-plus"></i> Register
                    </button>
                </div>

            </form>

            <p class="text-center text-muted mt-2 text-small">
                Already have an account?
                <a th:href="@{/login}">Login here</a>
            </p>

        </div>
    </main>

    <footer th:replace="~{fragments/footer :: footer}"></footer>
    <script th:src="@{/js/app.js}"></script>
</body>
</html>
